var __decorate=this&&this.__decorate||function(t,i,e,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,e):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,i,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(i,e,a):o(i,e))||a);return r>3&&a&&Object.defineProperty(i,e,a),a},__metadata=this&&this.__metadata||function(t,i){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,i)},__param=this&&this.__param||function(t,i){return function(e,n){i(e,n,t)}};System.register("css-animator/contracts/animation_options",[],function(t,i){"use strict";i&&i.id;return{setters:[],execute:function(){}}}),System.register("css-animator/contracts/element_props",[],function(t,i){"use strict";i&&i.id;return{setters:[],execute:function(){}}}),System.register("css-animator/contracts/listener_ref",[],function(t,i){"use strict";i&&i.id;return{setters:[],execute:function(){}}}),System.register("css-animator/contracts/timeout_ref",[],function(t,i){"use strict";i&&i.id;return{setters:[],execute:function(){}}}),System.register("css-animator/contracts",[],function(t,i){"use strict";i&&i.id;return{setters:[],execute:function(){}}}),System.register("css-animator/builder/animation_builder",[],function(t,i){"use strict";var e,n;i&&i.id;return{setters:[],execute:function(){!function(t){t[t.Animate=0]="Animate",t[t.Show=1]="Show",t[t.Hide=2]="Hide"}(e||(e={})),t("AnimationMode",e),n=function(){function AnimationBuilder(){this.animationOptions=Object.assign({},AnimationBuilder.defaults),this.defaultOptions=Object.assign({},this.animationOptions),this.classes=[],this.activeClasses=new Map,this.listeners=new Map,this.timeouts=new Map,this.styles=new Map,this.log("AnimationBuilder created.")}return AnimationBuilder.prototype.show=function(t){return this.animate(t,e.Show)},AnimationBuilder.prototype.hide=function(t){return this.animate(t,e.Hide)},AnimationBuilder.prototype.stop=function(t,i){return void 0===i&&(i=!0),this.removeTimeouts(t),this.removeListeners(t),i&&this.reset(t,!1),Promise.resolve(t)},AnimationBuilder.prototype.animate=function(t,i){var n=this;return void 0===i&&(i=e.Animate),i===e.Show&&this.hideElement(t),new Promise(function(e,o){n.removeTimeouts(t);var r=setTimeout(function(){n.reset(t,!0,!1,!0),n.registerAnimationListeners(t,i,e,o),n.saveStyle(t),n.saveClasses(t,i),n.pinElement(t,i),n.nextFrame(function(){n.showElement(t,i),n.applyProperties(t,i)})},n.animationOptions.delay);n.addTimeout(t,r,o),n.log("Timeout "+r+" registered for element",t)})},AnimationBuilder.prototype.reset=function(t,i,e,n){void 0===i&&(i=!0),void 0===e&&(e=!1),void 0===n&&(n=!1),i&&(this.removeTimeouts(t,e),this.removeListeners(t,n)),this.removeStyles(t),this.removeClasses(t)},AnimationBuilder.prototype.dispose=function(){this.timeouts.forEach(function(t){for(var i=0,e=t;i<e.length;i++){var n=e[i];clearTimeout(n.timeout)}}),this.listeners.forEach(function(t,i){for(var e=0,n=t;e<n.length;e++){var o=n[e];i.removeEventListener(o.eventName,o.handler)}}),this.classes=[],this.styles=new Map,this.timeouts=new Map,this.listeners=new Map},AnimationBuilder.prototype.addAnimationClass=function(t){return this.classes.indexOf(t)===-1&&this.classes.push(t),this},AnimationBuilder.prototype.removeAnimationClass=function(t){var i=this.classes.indexOf(t);return i!==-1&&this.classes.splice(i,1),this},AnimationBuilder.prototype.log=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];AnimationBuilder.DEBUG&&console.log.apply(console,["css-animator:"].concat(t))},AnimationBuilder.prototype.nextFrame=function(t){AnimationBuilder.raf(function(){AnimationBuilder.raf(t)})},AnimationBuilder.prototype.camelCase=function(t){return t.toLowerCase().replace(/-(.)/g,function(t,i){return i.toUpperCase()})},AnimationBuilder.prototype.hideElement=function(t,i){return this.animationOptions.useVisibility?void(t.style.visibility="hidden"):void t.setAttribute("hidden","")},AnimationBuilder.prototype.showElement=function(t,i){return this.animationOptions.pin&&i===e.Show&&(t.style.visibility="visible"),this.animationOptions.useVisibility?void(t.style.visibility="visible"):void t.removeAttribute("hidden")},AnimationBuilder.prototype.pinElement=function(t,i){if(this.animationOptions.pin){i===e.Show&&(t.style.visibility="hidden"),this.animationOptions.useVisibility||this.showElement(t);var n=this.getPosition(t);t.style.position=this.animationOptions.fixed?"fixed":"absolute",t.style.top=n.top+"px",t.style.left=n.left+"px",t.style.width=n.width+"px",t.style.height=n.height+"px",t.style.margin="0px"}},AnimationBuilder.prototype.getPosition=function(t){var i=t.getBoundingClientRect(),e=window.getComputedStyle(t),n=t.offsetLeft,o=t.offsetTop,r=i.width-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth),a=i.height-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderTopWidth)-parseFloat(e.borderBottomWidth);return this.animationOptions.fixed&&(n=i.left+window.scrollX,o=i.top+window.scrollY),{left:n,top:o,width:r,height:a}},AnimationBuilder.prototype.registerAnimationListeners=function(t,i,n,o){var r,a=this,s=this.animationStartEvent(t),u=this.animationEndEvent(t);t.addEventListener(s,r=function(){return a.log("Animation start handler fired for element",t),t.removeEventListener(s,r),r}),this.log("Registered animation start listener for element",t);var l;t.addEventListener(u,l=function(){return a.log("Animation end handler fired for element",t),t.removeEventListener(u,l),a.removeListeners(t,!1),a.reset(t,!0,!1,!1),i===e.Hide&&a.hideElement(t),i===e.Show&&a.showElement(t),n(t),l}),this.log("Registered animation end listener for element",t),this.addListener(t,s,r),this.addListener(t,u,l,o)},AnimationBuilder.prototype.addTimeout=function(t,i,e){this.timeouts.has(t)||this.timeouts.set(t,[]),this.timeouts.get(t).push({timeout:i,reject:e})},AnimationBuilder.prototype.addListener=function(t,i,e,n){this.listeners.has(t)||this.listeners.set(t,[]);var o=Object.assign({},this.classes);this.listeners.get(t).push({eventName:i,handler:e,reject:n,classes:o})},AnimationBuilder.prototype.removeListeners=function(t,i){var e=this;void 0===i&&(i=!1),this.listeners.has(t)&&(this.listeners.get(t).forEach(function(n){t.removeEventListener(n.eventName,n.handler),e.log("Listener "+n.eventName+" removed for element",t),i&&e.animationOptions.reject&&n.reject&&n.reject("animation_aborted")}),this.listeners["delete"](t))},AnimationBuilder.prototype.removeTimeouts=function(t,i){var e=this;void 0===i&&(i=!1),this.timeouts.has(t)&&(this.timeouts.get(t).forEach(function(n){clearTimeout(n.timeout),e.log("Timeout "+n.timeout+" removed for element",t),i&&e.animationOptions.reject&&n.reject&&n.reject("animation_aborted")}),this.timeouts["delete"](t))},AnimationBuilder.prototype.animationEndEvent=function(t){var i=document.createElement("endAnimationElement"),e={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(var n in e)if(void 0!==i.style[n])return e[n];return null},AnimationBuilder.prototype.animationStartEvent=function(t){var i=document.createElement("startAnimationElement"),e={animation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"animationstart",WebkitAnimation:"webkitAnimationStart"};for(var n in e)if(void 0!==i.style[n])return e[n];return null},AnimationBuilder.prototype.applyProperties=function(t,i){this.applyClasses(t,i),this.applyStyles(t,i)},AnimationBuilder.prototype.saveStyle=function(t){this.styles.set(t,Object.assign({},t.style))},AnimationBuilder.prototype.applyStyles=function(t,i){this.applyFillMode(t),this.applyTimingFunction(t),this.applyPlayState(t),this.applyDirection(t),this.applyDuration(t),this.applyIterationCount(t)},AnimationBuilder.prototype.removeStyles=function(t){if(this.styles.has(t)){var i=this.styles.get(t);t.removeAttribute("style");for(var e in i)i.hasOwnProperty(e)&&(t.style[e]=i[e]);this.styles["delete"](t)}},AnimationBuilder.prototype.saveClasses=function(t,i){var n=this.classes.slice(0);switch(i){case e.Show:n.push("animated-show");break;case e.Hide:n.push("animated-hide")}n.push("animated",this.animationOptions.type),this.activeClasses.set(t,n)},AnimationBuilder.prototype.applyClasses=function(t,i){var e=this.activeClasses.get(t)||[];(n=t.classList).add.apply(n,["animated"].concat(e));var n},AnimationBuilder.prototype.removeClasses=function(t){var i=this.activeClasses.get(t)||[];(e=t.classList).remove.apply(e,["animated","animated-show","animated-hide"].concat(i)),this.activeClasses["delete"](t);var e},AnimationBuilder.prototype.applyStyle=function(t,i,e){var n=document.createElement("checkStyle"),o={standard:this.camelCase(i),webkit:this.camelCase("-webkit-"+i),mozilla:this.camelCase("-moz-"+i),opera:this.camelCase("-o-"+i),explorer:this.camelCase("-ie-"+i)};for(var r in o)if(o.hasOwnProperty(r)&&void 0!==n.style[o[r]]){t.style[o[r]]=void 0===e||null===e?null:e;break}return this},Object.defineProperty(AnimationBuilder.prototype,"defaults",{get:function(){return this.defaultOptions},set:function(t){this.defaultOptions=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setDefaults=function(t){return this.defaults=t,this},Object.defineProperty(AnimationBuilder.prototype,"options",{get:function(){return this.animationOptions},set:function(t){this.animationOptions=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setOptions=function(t){return Object.assign(this.options,t),this},Object.defineProperty(AnimationBuilder.prototype,"reject",{get:function(){return this.animationOptions.reject},set:function(t){this.animationOptions.reject=t},enumerable:!0,configurable:!0}),Object.defineProperty(AnimationBuilder.prototype,"pin",{get:function(){return this.animationOptions.pin},set:function(t){this.animationOptions.pin=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setPin=function(t){return this.pin=t,this},Object.defineProperty(AnimationBuilder.prototype,"useVisibility",{get:function(){return this.animationOptions.useVisibility},set:function(t){this.animationOptions.useVisibility=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setUseVisibility=function(t){return this.useVisibility=t,this},Object.defineProperty(AnimationBuilder.prototype,"type",{get:function(){return this.animationOptions.type},set:function(t){this.animationOptions.type=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setType=function(t){return this.type=t,this},Object.defineProperty(AnimationBuilder.prototype,"fillMode",{get:function(){return this.animationOptions.fillMode},set:function(t){this.animationOptions.fillMode=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setFillMode=function(t){return this.fillMode=t,this},AnimationBuilder.prototype.applyFillMode=function(t,i){return this.applyStyle(t,"animation-fill-mode",i||this.animationOptions.fillMode),this},Object.defineProperty(AnimationBuilder.prototype,"timingFunction",{get:function(){return this.animationOptions.timingFunction},set:function(t){this.animationOptions.timingFunction=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setTimingFunction=function(t){return this.timingFunction=t,this},AnimationBuilder.prototype.applyTimingFunction=function(t,i){return this.applyStyle(t,"animation-timing-function",i||this.animationOptions.timingFunction),this},Object.defineProperty(AnimationBuilder.prototype,"playState",{get:function(){return this.animationOptions.playState},set:function(t){this.animationOptions.playState=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setPlayState=function(t){return this.playState=t,this},AnimationBuilder.prototype.applyPlayState=function(t,i){return this.applyStyle(t,"animation-play-state",i||this.animationOptions.playState),this},Object.defineProperty(AnimationBuilder.prototype,"direction",{get:function(){return this.animationOptions.direction},set:function(t){this.animationOptions.direction=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setDirection=function(t){return this.direction=t,this},AnimationBuilder.prototype.applyDirection=function(t,i){return this.applyStyle(t,"animation-direction",i||this.animationOptions.direction),this},Object.defineProperty(AnimationBuilder.prototype,"duration",{get:function(){return this.animationOptions.duration},set:function(t){this.animationOptions.duration=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setDuration=function(t){return this.duration=t,this},AnimationBuilder.prototype.applyDuration=function(t,i){return this.applyStyle(t,"animation-duration",(i||this.animationOptions.duration)+"ms"),this},Object.defineProperty(AnimationBuilder.prototype,"delay",{get:function(){return this.animationOptions.delay},set:function(t){this.animationOptions.delay=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setDelay=function(t){return this.delay=t,this},AnimationBuilder.prototype.applyDelayAsStyle=function(t,i){return this.applyStyle(t,"animation-delay",(i||this.animationOptions.delay)+"ms"),this},Object.defineProperty(AnimationBuilder.prototype,"iterationCount",{get:function(){return this.animationOptions.iterationCount},set:function(t){this.animationOptions.iterationCount=t},enumerable:!0,configurable:!0}),AnimationBuilder.prototype.setIterationCount=function(t){return this.iterationCount=t,this},AnimationBuilder.prototype.applyIterationCount=function(t,i){return this.applyStyle(t,"animation-iteration-count",i||this.animationOptions.iterationCount),this},AnimationBuilder.DEBUG=!1,AnimationBuilder.defaults={fixed:!1,reject:!0,useVisibility:!1,pin:!0,type:"bounce",fillMode:"none",timingFunction:"ease",playState:"running",direction:"normal",duration:1e3,delay:0,iterationCount:1},AnimationBuilder.raf=window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout,AnimationBuilder}(),t("AnimationBuilder",n)}}}),System.register("css-animator/builder",["css-animator/builder/animation_builder"],function(t,i){"use strict";function exportStar_1(i){var e={};for(var n in i)"default"!==n&&(e[n]=i[n]);t(e)}i&&i.id;return{setters:[function(t){exportStar_1(t)}],execute:function(){}}}),System.register("css-animator/angular/animation.service",["@angular/core","css-animator/builder"],function(t,i){"use strict";var e,n,o;i&&i.id;return{setters:[function(t){e=t},function(t){n=t}],execute:function(){o=function(){function AnimationService(){}return AnimationService.prototype.builder=function(){return new n.AnimationBuilder},AnimationService=__decorate([e.Injectable()],AnimationService)}(),t("AnimationService",o)}}}),System.register("css-animator/angular/animates.directive",["@angular/core","css-animator/angular/animation.service"],function(t,i){"use strict";var e,n,o;i&&i.id;return{setters:[function(t){e=t},function(t){n=t}],execute:function(){o=function(){function AnimatesDirective(t,i){this._elementRef=t,this._animationBuilder=i.builder()}return Object.defineProperty(AnimatesDirective.prototype,"animates",{set:function(t){this._defaultOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(AnimatesDirective.prototype,"animatesOnInit",{set:function(t){this._initOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(AnimatesDirective.prototype,"animatesInitMode",{set:function(t){"string"==typeof t&&(this._initMode=t.toLowerCase())},enumerable:!0,configurable:!0}),Object.defineProperty(AnimatesDirective.prototype,"animationBuilder",{get:function(){return this._animationBuilder},enumerable:!0,configurable:!0}),AnimatesDirective.prototype.ngOnInit=function(){if(this._initOptions){var t,i=this._animationBuilder.setOptions(this._initOptions);switch(this._initMode){case"show":t=i.show(this._elementRef.nativeElement);break;case"hide":t=i.hide(this._elementRef.nativeElement);break;default:t=i.animate(this._elementRef.nativeElement)}t.then(function(t){return t},function(t){})}},AnimatesDirective.prototype.start=function(t){return this._started=!0,this.setOptions(t),this._animationBuilder.animate(this._elementRef.nativeElement).then(function(t){return t},function(t){})},AnimatesDirective.prototype.hide=function(t){return this.setOptions(t),this._animationBuilder.setOptions(t).hide(this._elementRef.nativeElement).then(function(t){return t},function(t){})},AnimatesDirective.prototype.show=function(t){return this.setOptions(t),this._animationBuilder.show(this._elementRef.nativeElement).then(function(t){return t},function(t){})},AnimatesDirective.prototype.animate=function(t){return this.setOptions(t),this._animationBuilder.setOptions(this._defaultOptions).animate(this._elementRef.nativeElement).then(function(t){return t},function(t){})},AnimatesDirective.prototype.pause=function(){this._started&&this._animationBuilder.setPlayState("paused").applyPlayState(this._elementRef.nativeElement)},AnimatesDirective.prototype.resume=function(){this._started&&this._animationBuilder.setPlayState("running").applyPlayState(this._elementRef.nativeElement)},AnimatesDirective.prototype.toggle=function(){this._started&&this._animationBuilder.setPlayState("running"===this._animationBuilder.playState?"paused":"running").applyPlayState(this._elementRef.nativeElement)},AnimatesDirective.prototype.stop=function(){this._started=!1,this._animationBuilder.stop(this._elementRef.nativeElement).then(function(t){return t},function(t){})},AnimatesDirective.prototype.startOrStop=function(t){return this._started?void this.stop():void this.start(t)},AnimatesDirective.prototype.setOptions=function(t){return t?void this._animationBuilder.setOptions(t):void this._animationBuilder.setOptions(this._defaultOptions)},AnimatesDirective=__decorate([e.Directive({selector:"[animates]",exportAs:"animates",inputs:["animates","animatesOnInit","animatesInitMode"]}),__param(0,e.Inject(e.ElementRef)),__param(1,e.Inject(n.AnimationService)),__metadata("design:paramtypes",[e.ElementRef,n.AnimationService])],AnimatesDirective)}(),t("AnimatesDirective",o)}}}),System.register("css-animator/angular/animator.module",["@angular/core","css-animator/angular/animates.directive","css-animator/angular/animation.service"],function(t,i){"use strict";var e,n,o,r;i&&i.id;return{setters:[function(t){e=t},function(t){n=t},function(t){o=t}],execute:function(){r=function(){function AnimatorModule(){}return AnimatorModule=__decorate([e.NgModule({declarations:[n.AnimatesDirective],exports:[n.AnimatesDirective],providers:[o.AnimationService]})],AnimatorModule)}(),t("AnimatorModule",r)}}}),System.register("css-animator/angular",["css-animator/angular/animator.module","css-animator/angular/animates.directive","css-animator/angular/animation.service"],function(t,i){"use strict";function exportStar_2(i){var e={};for(var n in i)"default"!==n&&(e[n]=i[n]);t(e)}i&&i.id;return{setters:[function(t){exportStar_2(t)},function(t){exportStar_2(t)},function(t){exportStar_2(t)}],execute:function(){}}}),System.register("css-animator/index",["css-animator/builder","css-animator/angular"],function(t,i){"use strict";function exportStar_3(i){var e={};for(var n in i)"default"!==n&&(e[n]=i[n]);t(e)}i&&i.id;return{setters:[function(t){exportStar_3(t)},function(t){exportStar_3(t)}],execute:function(){}}}),System.register("css-animator",["css-animator/index"],function(t,i){"use strict";function exportStar_4(i){var e={};for(var n in i)"default"!==n&&(e[n]=i[n]);t(e)}i&&i.id;return{setters:[function(t){exportStar_4(t)}],execute:function(){}}}),System.register("index",["css-animator/index"],function(t,i){"use strict";function exportStar_5(i){var e={};for(var n in i)"default"!==n&&(e[n]=i[n]);t(e)}i&&i.id;return{setters:[function(t){exportStar_5(t)}],execute:function(){}}});